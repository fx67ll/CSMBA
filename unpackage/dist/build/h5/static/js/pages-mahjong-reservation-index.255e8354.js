(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-mahjong-reservation-index"],{"17b7":function(t,e,i){"use strict";i.r(e);var n=i("cff5"),a=i("e744");for(var o in a)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(o);i("b908");var r=i("f0c5"),s=Object(r["a"])(a["default"],n["b"],n["c"],!1,null,"06716cc3",null,!1,n["a"],void 0);e["default"]=s.exports},"24bf":function(t,e,i){"use strict";i("7a82");var n=i("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i("5530"));i("ac1f"),i("5319"),i("d3b7"),i("4de4"),i("d81d");var o=n(i("17b7")),r=i("4a31"),s=n(i("c161"));i("9555");var c=n(i("2b55")),l={components:{prettyTimes:o.default},data:function(){return{appointConfig:{showOvernight:!0,allowBeginTime:"10:00:00",allowEndTime:"22:00:00",allowTimeInterval:1,appointTime:["2022-02-10 15:30:00"],disableTimeSlot:[],myAppointTimeSlot:[]},logList:[],queryParams:{pageNum:1,pageSize:999,mahjongRoomId:1,reservationDate:"",reservationStatus:"",isNeedAll:!0},formParams:{mahjongRoomId:1,reservationStartTime:null,reservationEndTime:null,reservationStatus:null},nowDateInfo:{},isOvernightSelected:!1,debouncedSubmitReservation:null,loading:!1}},onShow:function(){this.handleDateChange(this.nowDateInfo)},onLoad:function(){var t=(0,s.default)().format("YYYY-MM-DD"),e=(0,s.default)().format("dddd");this.nowDateInfo={selectedDate:t,selectedWeek:e,activeIndex:0},this.queryParams.reservationDate=t.replace(/-/g,""),this.queryParams.pageNum=1,this.queryParams.pageSize=999,this.queryLogList(!0),this.queryLogList(!1),this.debouncedSubmitReservation=c.default.debounce(this._realHandleSubmitReservation,500,!0)},methods:{handleComponentReady:function(){var t,e,i,n=(null===this||void 0===this||null===(t=this.$refs)||void 0===t||null===(e=t.prettyTimes)||void 0===e||null===(i=e.dateArr)||void 0===i?void 0:i[0])||null;n&&(this.nowDateInfo={selectedDate:n.date,selectedWeek:n.week,activeIndex:0})},clearLogList:function(){this.logList=[],this.appointConfig.disableTimeSlot=[],this.appointConfig.myAppointTimeSlot=[]},queryLogList:function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],i=this;this.loading=!0,this.queryParams.pageNum=1,this.queryParams.pageSize=999,this.queryParams.isNeedAll=e,(0,r.listMahjongReservationLog)(i.queryParams).then((function(n){var a;if(200===(null===n||void 0===n?void 0:n.code))if(null!==n&&void 0!==n&&n.rows&&(null===n||void 0===n||null===(a=n.rows)||void 0===a?void 0:a.length)>0){var o,r;i.logList=(null===n||void 0===n?void 0:n.rows)||[];var c=(null===(o=(null===n||void 0===n?void 0:n.rows)||[])||void 0===o||null===(r=o.filter((function(t){return"0"===t.reservationStatus})))||void 0===r?void 0:r.map((function(t){var e=(0,s.default)(t.reservationStartTime).format("YYYY-MM-DD HH:mm:ss"),i=(0,s.default)(t.reservationEndTime),n=(0,s.default)();return i.isAfter(n.subtract(1,"hours"))&&(i=i.subtract(1,"hours")),[e,i.format("YYYY-MM-DD HH:mm:ss")]})))||[];e?t.appointConfig.disableTimeSlot=c:t.appointConfig.myAppointTimeSlot=c}else i.clearLogList();else i.clearLogList(),uni.showToast({title:"查询预约订单记录失败！",icon:"none",duration:1998})})).catch((function(t){i.clearLogList()})).finally((function(){t.loading=!1}))},handleOvernightChange:function(t){t?(this.isOvernightSelected=!0,this.formParams.reservationStartTime=t.start,this.formParams.reservationEndTime=(0,s.default)(t.end).subtract(1,"h").format("YYYY-MM-DD HH:mm:ss")):(this.isOvernightSelected=!1,this.formParams.reservationStartTime=null,this.formParams.reservationEndTime=null)},handleOvernightSubmit:function(t){t&&(this.formParams.reservationStartTime=t.start,this.formParams.reservationEndTime=t.end,this.submitReservation())},handleTimeChange:function(t){this.isOvernightSelected=!1;var e=(null===t||void 0===t?void 0:t.beginTime)||"",i=(null===t||void 0===t?void 0:t.endTime)||"";this.formParams=(0,a.default)((0,a.default)({},this.formParams),{},{reservationStartTime:e,reservationEndTime:i})},handleDateChange:function(t){var e;this.nowDateInfo=t;var i=(null===t||void 0===t||null===(e=t.selectedDate)||void 0===e?void 0:e.replace(/-/g,""))||"";this.queryParams.isNeedAll=!0,this.queryParams.reservationDate=i,this.queryLogList(!0),this.queryLogList(!1)},handleSubmitReservation:function(){this.debouncedSubmitReservation()},_realHandleSubmitReservation:function(){if(this.isOvernightSelected&&this.formParams.reservationStartTime&&this.formParams.reservationEndTime)this.submitReservation();else{if(this.formParams.mahjongRoomId=1,this.formParams.reservationStatus=0,this.formParams.reservationStartTime&&this.formParams.reservationEndTime){var t=(0,s.default)(this.formParams.reservationStartTime),e=(0,s.default)(this.formParams.reservationEndTime);if(t.isAfter(e)){var i=[this.formParams.reservationEndTime,this.formParams.reservationStartTime];this.formParams.reservationStartTime=i[0],this.formParams.reservationEndTime=i[1]}this.submitReservation()}else uni.showToast({title:"请选择完整的预约时间段！",icon:"none",duration:1998})}},submitReservation:function(){var t=this;this.loading=!0,this.formParams.reservationEndTime=(0,s.default)(this.formParams.reservationEndTime).add(1,"h").format("YYYY-MM-DD HH:mm:ss"),(0,r.addMahjongReservationLog)(this.formParams).then((function(e){200===(null===e||void 0===e?void 0:e.code)?(t.queryLogList(!0),t.queryLogList(!1),t.formParams.reservationStartTime=null,t.formParams.reservationEndTime=null,t.isOvernightSelected=!1,uni.showToast({title:"提交预约订单成功！",icon:"none",duration:1998})):(uni.showToast({title:"提交预约订单失败！",icon:"none",duration:1998}),t.queryLogList(!0),t.queryLogList(!1))})).catch((function(e){uni.showToast({title:"提交预约订单失败！",icon:"none",duration:1998}),t.queryLogList(!0),t.queryLogList(!1)})).finally((function(){t.loading=!1}))}}};e.default=l},"34e8":function(t,e,i){"use strict";i.r(e);var n=i("7200"),a=i("920f");for(var o in a)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(o);i("63cd");var r=i("f0c5"),s=Object(r["a"])(a["default"],n["b"],n["c"],!1,null,"4afb8554",null,!1,n["a"],void 0);e["default"]=s.exports},3850:function(t,e,i){"use strict";function n(t){return t<10?"0".concat(t):t}function a(t,e){var i=new Date(t),a=i.getFullYear(),o=i.getMonth()+1,r=i.getDate(),s=i.getDay(),c=i.getHours(),l=i.getMinutes();return{allDate:"".concat(a,"/").concat(n(o),"/").concat(n(r)),date:"".concat(n(a),"-").concat(n(o),"-").concat(n(r)),day:"星期".concat(["日","一","二","三","四","五","六"][s]),hour:n(c)+":"+n(l)+(e?"":":00")}}i("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.currentTime=function(){var t=new Date,e=t.getFullYear(),i=t.getMonth()+1,a=t.getDate(),o=e+"-"+n(i)+"-"+n(a),r=t.getHours(),s=t.getMinutes(),c=t.getSeconds(),l=n(r)+":"+n(s)+":"+n(c);return{date:o,time:l}},e.initData=function(){for(var t=[],e=new Date,i=e.getTime(),n={0:"今天",1:"明天",2:"后天"},o=0;o<30;o++){var r;t.push({date:a(i+864e5*o).date,timeStamp:i+864e5*o,week:null!==(r=n[o])&&void 0!==r?r:a(i+864e5*o).day})}return t},e.initTime=function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"10:00:00",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"21:00:00",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=[],r=a(Date.now()).allDate,s="".concat(r," ").concat(t),c="".concat(r," ").concat(e),l=new Date(s).getTime(),d=new Date(c).getTime(),u=36e5*i,h=(d-l)/u,v=h%2==0?h:h-1,m=0,f=l;f<=d;f+=u)if(n?(m++,o.push({begin:a(f,n).hour,end:a(f+u,n).hour,disable:!1})):o.push({time:a(f).hour,disable:!1}),n&&m>=v)return o;return o},e.timeStamp=a,i("99af"),i("14d9")},"4a31":function(t,e,i){"use strict";i("7a82");var n=i("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.addMahjongReservationLog=function(t){return(0,a.default)({url:"/mahjong/reservation/log/addReservationLogForApp",method:"post",data:t})},e.editMahjongReservationLog=function(t){return(0,a.default)({url:"/mahjong/reservation/log/editReservationLogForApp",method:"put",data:t})},e.listMahjongReservationLog=function(t){var e=t.pageNum,i=t.pageSize;return delete t.pageNum,delete t.pageSize,(0,a.default)({url:"/mahjong/reservation/log/getReservationLogListForApp?pageNum=".concat(e,"&pageSize=").concat(i),method:"post",data:t})},i("99af");var a=n(i("5912"))},"63cd":function(t,e,i){"use strict";var n=i("7b6d"),a=i.n(n);a.a},6425:function(t,e,i){"use strict";i("7a82");var n=i("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i("53ca")),o=n(i("3835")),r=n(i("b85c"));i("a9e3"),i("fb6a"),i("d3b7"),i("159b"),i("99af"),i("caad"),i("2532"),i("13d5"),i("14d9");var s=i("3850"),c={name:"prettyTimes",model:{prop:"showPop",event:"change"},props:{isQuantum:{type:Boolean,default:!1},isMultiple:{type:Boolean,default:!1},isSection:{type:Boolean,default:!1},showOvernight:{type:Boolean,default:!1},disableText:{type:String,default:"已约满"},undisableText:{type:String,default:"可预约"},timeInterval:{type:Number,default:1},selectedTabColor:{type:String,default:"#2ecc71"},selectedItemColor:{type:String,default:"#2ecc71"},beginTime:{type:String,default:"09:00:00"},endTime:{type:String,default:"19:00:00"},appointTime:{type:Array,default:function(){return[]}},disableTimeSlot:{type:Array,default:function(){return[]}},myAppointTimeSlot:{type:Array,default:function(){return[]}},formParams:{type:Object,default:function(){return{}}}},watch:{appointTime:{handler:function(t){this.initOnload()}},disableTimeSlot:{handler:function(t){this.initOnload()},deep:!0},myAppointTimeSlot:{handler:function(t){this.initOnload()},deep:!0},formParams:{handler:function(t){this.checkOvernightEcho(),this.checkTimeSectionEcho()},deep:!0}},data:function(){return{orderDateTime:"暂无选择",orderTimeArr:{},dateArr:[],timeArr:[],nowDate:"",dateActive:0,timeActive:0,timeQuanBeginIndex:0,selectDate:"",timeQuanBegin:"",timeQuanEnd:"",isOvernightActive:!1,isOvernightDisabled:!1,isOvernightExpired:!1,isOvernightMyAppoint:!1}},created:function(t){this.selectDate=this.nowDate=(0,s.currentTime)().date,this.initOnload()},mounted:function(){this.$emit("ready")},methods:{initOnload:function(){var t=this;this.dateArr=(0,s.initData)(),this.timeArr=(0,s.initTime)(this.beginTime,this.endTime,this.timeInterval,this.isQuantum),this.timeQuanBegin=this.timeQuanEnd="";var e=!0,i=(0,s.currentTime)().time,n=new Date("2000-01-01 ".concat(i)).getTime(),a=n+36e5,c=new Date(a).toTimeString().slice(0,8);this.isSection&&!this.isQuantum?this.timeArr.forEach((function(t,e){var i=t.time,n=i.slice(0,5),a=i.slice(0,2),o="".concat(a,":59");t.timeRange="".concat(n,"~").concat(o)})):this.isQuantum||this.timeArr.forEach((function(t,e){var i=t.time,n=i.slice(0,5),a=i.slice(0,2),o="".concat(a,":59");t.timeRange="".concat(n,"~").concat(o)})),this.checkOvernightStatus(),this.checkTimeSectionEcho(),this.timeArr.forEach((function(i,n){if(i.isMyAppoint=!1,i.isExpired=!1,t.isQuantum){var a,s="".concat(t.selectDate," ").concat(i.begin,":00"),l="".concat(t.selectDate," ").concat(i.end,":00"),d=(0,r.default)(t.myAppointTimeSlot);try{for(d.s();!(a=d.n()).done;){var u=a.value,h=(0,o.default)(u,2),v=h[0],m=void 0===v?"":v,f=h[1],g=void 0===f?"":f;m&&g&&m<=s&&l<=g&&(i.isMyAppoint=!0,i.disable=!1)}}catch(F){d.e(F)}finally{d.f()}if(!i.isMyAppoint){var p,b=(0,r.default)(t.disableTimeSlot);try{for(b.s();!(p=b.n()).done;){var y=p.value,T=(0,o.default)(y,2),x=T[0],A=void 0===x?"":x,D=T[1],w=void 0===D?"":D;A&&w&&A<=s&&l<=w&&(i.disable=!0)}}catch(F){b.e(F)}finally{b.f()}t.selectDate==t.nowDate&&c>"".concat(i.begin,":00")&&(i.disable=!0,i.isExpired=!0)}if(t.orderTimeArr[t.selectDate]){var S,E=(0,r.default)(t.orderTimeArr[t.selectDate]);try{for(E.s();!(S=E.n()).done;){var O=S.value;O[0].split(" ")[1]==="".concat(i.begin,":00")&&O[1].split(" ")[1]==="".concat(i.end,":00")&&(i.isActive=!0)}}catch(F){E.e(F)}finally{E.f()}}}else{var M,C="".concat(t.selectDate," ").concat(i.time),P=(0,r.default)(t.myAppointTimeSlot);try{for(P.s();!(M=P.n()).done;){var _=M.value,Q=(0,o.default)(_,2),k=Q[0],L=void 0===k?"":k,I=Q[1],$=void 0===I?"":I;L&&$&&L<=C&&C<=$&&(i.isMyAppoint=!0,i.disable=!1)}}catch(F){P.e(F)}finally{P.f()}if(!i.isMyAppoint){t.appointTime.forEach((function(e){var n=e.split(" "),a=(0,o.default)(n,2),r=a[0],s=a[1];r==t.selectDate&&i.time==s&&(i.disable=!0)}));var B,R=(0,r.default)(t.disableTimeSlot);try{for(R.s();!(B=R.n()).done;){var j=B.value,Y=(0,o.default)(j,2),z=Y[0],q=void 0===z?"":z,N=Y[1],H=void 0===N?"":N;q&&H&&q<=C&&C<=H&&(i.disable=!0)}}catch(F){R.e(F)}finally{R.f()}t.selectDate==t.nowDate&&c>i.time&&(i.disable=!0,i.isExpired=!0)}i.disable||i.isMyAppoint||(e=!1),t.isSection&&(t.formParams.reservationStartTime&&t.formParams.reservationEndTime||(i.isInclude=!1)),t.isMultiple&&(t.orderTimeArr[t.selectDate]||[]).includes(i.time)&&(i.isActive=!0)}})),this.orderDateTime=e?"暂无选择":this.selectDate,this.timeActive=-1;for(var l=0,d=this.timeArr.length;l<d;l++)if(!this.timeArr[l].disable&&!this.timeArr[l].isMyAppoint){var u=this.timeArr[l].time.slice(0,2),h=this.timeArr[l].time.slice(0,5);return this.orderDateTime="".concat(this.selectDate," ").concat(h,"~").concat(u,":59"),void(this.timeActive=l)}},checkTimeSectionEcho:function(){if(this.isSection&&this.formParams.reservationStartTime&&this.formParams.reservationEndTime){var t=this.formParams.reservationStartTime,e=this.formParams.reservationEndTime,i=t.split(" ")[0];if(i===this.selectDate){var n=t.split(" ")[1].slice(0,2),a=t.split(" ")[1].slice(0,5),o="".concat(n,":59"),r=-1,s=-1;if(this.timeArr.forEach((function(t,i){var n=t.time.slice(0,5);n===a&&(r=i),t.time.slice(0,5)===e.split(" ")[1].slice(0,5)&&(s=i)})),-1!==r&&-1!==s){this.timeQuanBeginIndex=r,this.timeQuanBegin=this.timeArr[r].time,this.timeQuanEnd=this.timeArr[s].time;for(var c=r+1;c<s;c++)this.timeArr[c].isInclude=!0;this.orderDateTime="".concat(this.selectDate," ").concat(a," ~ ").concat(o)}}}},getOvernightStatusText:function(){return this.isOvernightExpired?"已过期":this.isOvernightMyAppoint?"我已约":this.isOvernightDisabled?"已约满":"可预约"},checkOvernightStatus:function(){if(this.isOvernightActive=!1,this.isOvernightDisabled=!1,this.isOvernightExpired=!1,this.isOvernightMyAppoint=!1,this.showOvernight){var t="".concat(this.selectDate," 23:00:00"),e=this.getNextDate(this.selectDate),i="".concat(e," 09:00:00");if(this.selectDate===this.nowDate){var n=new Date,a=new Date("".concat(this.selectDate," 23:00:00"));n>=a&&(this.isOvernightExpired=!0,this.isOvernightDisabled=!0)}var s,c=(0,r.default)(this.myAppointTimeSlot);try{for(c.s();!(s=c.n()).done;){var l=s.value,d=(0,o.default)(l,2),u=d[0],h=void 0===u?"":u,v=d[1],m=void 0===v?"":v;if(h&&m&&h===t&&m===i){this.isOvernightMyAppoint=!0,this.isOvernightDisabled=!0;break}}}catch(D){c.e(D)}finally{c.f()}if(!this.isOvernightMyAppoint&&!this.isOvernightExpired){var f,g=(0,r.default)(this.disableTimeSlot);try{for(g.s();!(f=g.n()).done;){var p=f.value,b=(0,o.default)(p,2),y=b[0],T=void 0===y?"":y,x=b[1],A=void 0===x?"":x;if(T&&A&&(T<=t&&t<A||T<i&&i<=A||t<=T&&A<=i)){this.isOvernightDisabled=!0;break}}}catch(D){g.e(D)}finally{g.f()}}this.checkOvernightEcho()}},checkOvernightEcho:function(){if(this.showOvernight){var t="".concat(this.selectDate," 23:00:00"),e=this.getNextDate(this.selectDate),i="".concat(e," 10:00:00");if(this.formParams&&this.formParams.reservationStartTime&&this.formParams.reservationEndTime){var n=this.formParams.reservationStartTime,a=this.formParams.reservationEndTime;n===t&&a===i?(this.isOvernightActive=!0,this.orderDateTime="".concat(this.selectDate," 23:00 ~ ").concat(e," 10:00")):this.isOvernightActive=!1}}},getNextDate:function(t){var e=new Date(t);return e.setDate(e.getDate()+1),e.toISOString().split("T")[0]},selectOvernightEvent:function(){if(!this.isOvernightDisabled)if(this.isOvernightActive=!this.isOvernightActive,this.isOvernightActive){this.clearTimeSelection();var t="".concat(this.selectDate," 23:00:00"),e=this.getNextDate(this.selectDate),i="".concat(e," 10:00:00");this.$emit("overnight-change",{start:t,end:i,date:this.selectDate}),this.orderDateTime="".concat(this.selectDate," 23:00 ~ ").concat(e," 10:00")}else this.$emit("overnight-change",null),this.orderDateTime="暂无选择"},clearTimeSelection:function(){this.timeActive=-1,this.timeQuanBegin="",this.timeQuanEnd="",this.orderDateTime="暂无选择",this.orderTimeArr={},this.timeArr.forEach((function(t){t.isActive=!1,t.isInclude=!1}))},selectDateEvent:function(t,e){this.dateActive=t,this.selectDate=e.date,this.initOnload(),this.$emit("date-change",{selectedDate:e.date,selectedWeek:e.week,activeIndex:t})},selectTimeEvent:function(t,e){var i=this;if(this.isOvernightActive&&(this.isOvernightActive=!1,this.$emit("overnight-change",null)),this.isQuantum)return this.handleSelectQuantum(t,e);if(!e.isMyAppoint&&!e.disable)if(this.isMultiple)(function(){e.isActive=!e.isActive,i.timeArr=i.timeArr.slice(),i.orderTimeArr[i.selectDate]=i.timeArr.reduce((function(t,e){return e.isActive&&t.push(e.time),t}),[]);var t=[],n=function(e){i.orderTimeArr[e].forEach((function(i){t.push("".concat(e," ").concat(i))}))};for(var a in i.orderTimeArr)n(a);i.$emit("change",t)})();else{this.timeActive=t;var n=e.time.slice(0,2),a=e.time.slice(0,5);this.orderDateTime="".concat(this.selectDate," ").concat(a,"~").concat(n,":59"),this.$emit("change",this.orderDateTime)}},handleSection:function(t,e){var i=this;if(this.isOvernightActive&&(this.isOvernightActive=!1,this.$emit("overnight-change",null)),!e.isMyAppoint&&!e.disable){var n=function(){i.timeQuanBeginIndex=t,i.timeQuanBegin=e.time,i.timeQuanEnd="",i.$emit("change",{beginTime:"".concat(i.selectDate," ").concat(i.timeQuanBegin),endTime:i.timeQuanEnd?"".concat(i.selectDate," ").concat(i.timeQuanEnd):null})};if(this.timeQuanBegin){if(!this.timeQuanEnd&&this.timeQuanBegin){var a,o=!1,r=this.timeQuanBeginIndex,s=t;r>s&&(a=[s,r],r=a[0],s=a[1]);for(var c=r+1;c<s;c++)if(this.timeArr[c].disable||this.timeArr[c].isMyAppoint)return o=!0,void n();if(!o)for(var l=r+1;l<s;l++)this.timeArr[l].isInclude=!0;this.timeQuanEnd=e.time;var d="".concat(this.selectDate," ").concat(this.timeQuanBegin),u="".concat(this.selectDate," ").concat(this.timeQuanEnd),h=this.timeQuanBegin.slice(0,2),v=this.timeQuanBegin.slice(0,5),m="".concat(h,":59");return this.orderDateTime="".concat(this.selectDate," ").concat(v," ~ ").concat(m),void this.$emit("change",{beginTime:d,endTime:u})}this.timeQuanBegin&&this.timeQuanEnd&&(this.timeArr.forEach((function(t){t.isInclude=!1})),n())}else n()}},handleSelectQuantum:function(t,e){var i=this;if(this.isOvernightActive&&(this.isOvernightActive=!1,this.$emit("overnight-change",null)),!e.isMyAppoint&&!e.disable)if(this.isMultiple)e.isActive=!e.isActive,this.timeArr=this.timeArr.slice(),this.orderTimeArr[this.selectDate]=this.timeArr.reduce((function(t,e){var n="".concat(i.selectDate," ").concat(e.begin,":00"),a="".concat(i.selectDate," ").concat(e.end,":00");return e.isActive&&t.push([n,a]),t}),[]),this.$emit("change",this.orderTimeArr);else{this.timeActive=t;var n="".concat(cur.begin.slice(0,2),":59");this.orderDateTime={begin:"".concat(this.selectDate," ").concat(e.begin,":00"),end:"".concat(this.selectDate," ").concat(e.end,":00"),displayText:"".concat(e.begin,":00~").concat(n)},this.$emit("change",this.orderDateTime)}},handleChange:function(){var t;this.timeQuanBegin>this.timeQuanEnd&&(t=[this.timeQuanEnd,this.timeQuanBegin],this.timeQuanBegin=t[0],this.timeQuanEnd=t[1])},handleSubmit:function(){var t=this;if(this.isOvernightActive){var e="".concat(this.selectDate," 23:00:00"),i=this.getNextDate(this.selectDate),n="".concat(i," 10:00:00");this.$emit("overnight-submit",{start:e,end:n,date:this.selectDate})}else if(this.isSection){this.handleChange();var o="".concat(this.selectDate," ").concat(this.timeQuanBegin),r=this.timeQuanEnd?"".concat(this.selectDate," ").concat(this.timeQuanEnd):null;this.$emit("change",{beginTime:o,endTime:r})}else if(this.isMultiple){var s=function(){if(t.isQuantum)return t.$emit("change",t.orderTimeArr),{v:void 0};var e=[],i=function(i){t.orderTimeArr[i].forEach((function(t){e.push("".concat(i," ").concat(t))}))};for(var n in t.orderTimeArr)i(n);t.$emit("change",e)}();if("object"===(0,a.default)(s))return s.v}else this.$emit("change",this.orderDateTime)}}};e.default=c},6959:function(t,e,i){var n=i("24fb");e=n(!1),e.push([t.i,'@charset "UTF-8";\r\n/**\r\n * uni-app内置的常用样式变量\r\n */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */uni-page-body[data-v-06716cc3]{height:100%}.content[data-v-06716cc3]{text-align:center;height:100%}.bottom[data-v-06716cc3]{display:flex;flex-direction:row;position:fixed;bottom:8px;top:auto;left:0;width:100%}.show-time[data-v-06716cc3]{width:70%;height:47px;color:#505050;font-size:15px;line-height:47px;text-align:center;background-color:#fff}.submit-btn[data-v-06716cc3]{width:25%;height:40px;color:#fff;background-color:#2ecc71;font-size:15px;line-height:40px;text-align:center;margin:auto;padding:0}.fontw[data-v-06716cc3]{font-weight:700}.borderb[data-v-06716cc3]{border-bottom:2px solid #2ecc71}.container uni-view[data-v-06716cc3],\r\n.container uni-text[data-v-06716cc3],\r\n.container uni-image[data-v-06716cc3]{box-sizing:border-box}.container uni-scroll-view[data-v-06716cc3]{width:100%;white-space:nowrap;height:75px;background-color:#fff;position:relative;padding-top:10px}.container uni-scroll-view[data-v-06716cc3]::after{background:#e5e5e5;content:"";display:block;width:100%;height:1px;position:absolute;bottom:0;left:0;-webkit-transform:scaleY(.5);transform:scaleY(.5)}.container uni-scroll-view .flex-box[data-v-06716cc3]{display:inline-block;height:60px;width:25%;margin:0 %?7?% 0 %?7?%;box-sizing:border-box}.container uni-scroll-view .flex-box.active .date-box[data-v-06716cc3]{border:none}.container uni-scroll-view .flex-box.active .date-box .days[data-v-06716cc3]{font-weight:700;color:#818181}.container uni-scroll-view .flex-box.active .date-box .date[data-v-06716cc3]{font-weight:700;color:#818181}.container uni-scroll-view .flex-box .date-box[data-v-06716cc3]{border:none;display:flex;height:50px;flex-direction:column;align-items:center;justify-content:space-around;font-size:%?30?%;color:#818181}.container uni-scroll-view .flex-box .date-box .date[data-v-06716cc3]{font-weight:700;color:#818181;font-size:%?30?%}.container .time-box[data-v-06716cc3]{padding:%?28?% %?12?% %?26?%;display:flex;flex-wrap:wrap;background-color:#fff;padding-bottom:%?220?%}.container .time-box .item[data-v-06716cc3]{width:25%;padding:0 %?9?%;margin:10px 0}.container .time-box .item-box[data-v-06716cc3]{width:100%;height:%?154?%;padding:0 %?44?%;background:#fff;color:#333;border:1px solid #eee;font-size:%?28?%;border-radius:%?10?%;display:flex;flex-direction:column;align-items:center;justify-content:center}.container .time-box .item-box.disable[data-v-06716cc3]{background:#f1f3f6!important;color:#999!important}.container .time-box .item-box.my-appoint[data-v-06716cc3]{background:rgba(46,204,113,.1)!important;color:#2ecc71!important}.container .time-box .item-box.active[data-v-06716cc3]{border:1px solid #2ecc71;font-weight:700}.container .time-box .item-box .all[data-v-06716cc3]{font-size:%?22?%;padding-top:5px}.overnight-item-wrapper[data-v-06716cc3]{flex:0 0 75%}.overnight-item-wrapper .overnight-box[data-v-06716cc3]{display:flex;flex-direction:column;align-items:center;padding:%?30?% %?20?%;border:%?2?% solid #e0e0e0;border-radius:%?12?%;background-color:#f9f9f9;transition:all .3s ease;height:100%;justify-content:center}.overnight-item-wrapper .overnight-box.active[data-v-06716cc3]{border-color:#2ecc71;background-color:#e8f5e8;color:#2ecc71}.overnight-item-wrapper .overnight-box.disable[data-v-06716cc3]{background-color:#f5f5f5;color:#999;border-color:#ddd}.overnight-item-wrapper .overnight-box .overnight-content[data-v-06716cc3]{display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center}.overnight-title[data-v-06716cc3]{font-size:%?32?%;font-weight:700;margin-bottom:%?10?%}.overnight-time[data-v-06716cc3]{font-size:%?28?%;margin-bottom:%?10?%}.overnight-status[data-v-06716cc3]{font-size:%?24?%;color:#666}.overnight-box.active .overnight-status[data-v-06716cc3]{color:#2ecc71}.overnight-box.disable .overnight-status[data-v-06716cc3]{color:#999}',""]),t.exports=e},7200:function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return a})),i.d(e,"a",(function(){}));var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"fx67ll-reservation-box"},[t.loading?i("v-uni-view",{staticClass:"loading-mask"},[i("v-uni-view",{staticClass:"loading-content"},[i("v-uni-text",{staticClass:"loading-text"},[t._v("加载数据中...")])],1)],1):t._e(),i("prettyTimes",{ref:"prettyTimes",attrs:{showOvernight:t.appointConfig.showOvernight,beginTime:t.appointConfig.allowBeginTime,endTime:t.appointConfig.allowEndTime,timeInterval:t.appointConfig.allowTimeInterval,appointTime:t.appointConfig.appointTime,isSection:!0,disableTimeSlot:t.appointConfig.disableTimeSlot,myAppointTimeSlot:t.appointConfig.myAppointTimeSlot,formParams:t.formParams},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.handleTimeChange.apply(void 0,arguments)},"date-change":function(e){arguments[0]=e=t.$handleEvent(e),t.handleDateChange.apply(void 0,arguments)},ready:function(e){arguments[0]=e=t.$handleEvent(e),t.handleComponentReady.apply(void 0,arguments)},"overnight-change":function(e){arguments[0]=e=t.$handleEvent(e),t.handleOvernightChange.apply(void 0,arguments)},"overnight-submit":function(e){arguments[0]=e=t.$handleEvent(e),t.handleOvernightSubmit.apply(void 0,arguments)}}}),i("v-uni-view",{staticClass:"submit-btn-container"},[i("v-uni-button",{staticClass:"submit-btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.handleSubmitReservation.apply(void 0,arguments)}}},[t._v("提交预约")])],1)],1)},a=[]},"7b6d":function(t,e,i){var n=i("ae17");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("4f06").default;a("741d10df",n,!0,{sourceMap:!1,shadowMode:!1})},"920f":function(t,e,i){"use strict";i.r(e);var n=i("24bf"),a=i.n(n);for(var o in n)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(o);e["default"]=a.a},ae17:function(t,e,i){var n=i("24fb");e=n(!1),e.push([t.i,'@charset "UTF-8";\r\n/**\r\n * uni-app内置的常用样式变量\r\n */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */uni-page-body[data-v-4afb8554]{background-color:#fff}body.?%PAGE?%[data-v-4afb8554]{background-color:#fff}\r\n/* 新增：提交按钮容器（固定定位到底部） */.submit-btn-container[data-v-4afb8554]{position:fixed;bottom:%?100?%;left:0;right:0;padding:%?20?% %?30?%;box-shadow:0 %?-2?% %?10?% rgba(0,0,0,.05);z-index:99}\r\n/* 新增：提交按钮样式 */.submit-btn[data-v-4afb8554]{width:100%;height:%?80?%;line-height:%?80?%;background-color:#2ecc71;color:#fff;font-size:%?32?%;border-radius:%?40?%}\r\n/* 新增：全局遮罩层样式 */.loading-mask[data-v-4afb8554]{position:fixed;top:0;left:0;right:0;bottom:0;background-color:rgba(0,0,0,.5);display:flex;justify-content:center;align-items:center;z-index:9999}.loading-content[data-v-4afb8554]{background-color:#fff;padding:%?40?% %?60?%;border-radius:%?20?%;display:flex;align-items:center;justify-content:center}.loading-text[data-v-4afb8554]{font-size:%?32?%;color:#333}',""]),t.exports=e},b85c:function(t,e,i){"use strict";i("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var i="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=(0,n.default)(t))||e&&t&&"number"===typeof t.length){i&&(t=i);var a=0,o=function(){};return{s:o,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,s=!0,c=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return s=t.done,t},e:function(t){c=!0,r=t},f:function(){try{s||null==i["return"]||i["return"]()}finally{if(c)throw r}}}},i("a4d3"),i("e01a"),i("d3b7"),i("d28b"),i("3ca3"),i("ddb0"),i("d9e2"),i("d401");var n=function(t){return t&&t.__esModule?t:{default:t}}(i("06c5"))},b908:function(t,e,i){"use strict";var n=i("e6fb"),a=i.n(n);a.a},cff5:function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return a})),i.d(e,"a",(function(){}));var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"content"},[i("v-uni-view",{staticClass:"container"},[i("v-uni-scroll-view",{staticClass:"scroll-view_H b-t b-b",attrs:{"scroll-x":!0}},[t._l(t.dateArr,(function(e,n){return[i("div",{key:n+"_0",staticClass:"flex-box",class:{borderb:n==t.dateActive},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.selectDateEvent(n,e)}}},[i("v-uni-view",{staticClass:"date-box",style:{color:n==t.dateActive?t.selectedTabColor:"#333"}},[i("v-uni-text",{staticClass:"fontw"},[t._v(t._s(e.week))]),i("v-uni-text",[t._v(t._s(e.date))])],1)],1)]}))],2),!t.isSection||t.isQuantum?i("v-uni-view",{staticClass:"time-box"},[t._l(t.timeArr,(function(e,n){return[i("v-uni-view",{key:n,staticClass:"item"},[i("v-uni-view",{staticClass:"item-box",class:{disable:e.disable&&!e.isMyAppoint,"my-appoint":e.isMyAppoint,active:t.isMultiple?e.isActive:n==t.timeActive},style:{color:e.isMyAppoint?"#2ecc71":t.isMultiple?e.isActive?t.selectedItemColor:"#333":n==t.timeActive?t.selectedItemColor:"#333"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.selectTimeEvent(n,e)}}},[t.isQuantum?i("v-uni-text",[t._v(t._s(e.begin)+"~"+t._s(e.end))]):i("v-uni-text",[t._v(t._s(e.timeRange))]),i("v-uni-text",{staticClass:"all"},[t._v(t._s(e.isMyAppoint?"我已约":e.isExpired?"已过期":e.disable?t.disableText:t.undisableText))])],1)],1)]}))],2):i("v-uni-view",{staticClass:"time-box"},[t._l(t.timeArr,(function(e,n){return[i("v-uni-view",{key:n,staticClass:"item"},[i("v-uni-view",{staticClass:"item-box",class:{disable:e.disable&&!e.isMyAppoint,"my-appoint":e.isMyAppoint,active:e.time==t.timeQuanBegin||e.time==t.timeQuanEnd||e.isInclude},style:{color:e.isMyAppoint?"#2ecc71":e.time==t.timeQuanBegin||e.time==t.timeQuanEnd||e.isInclude?t.selectedItemColor:"#333"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.handleSection(n,e)}}},[i("v-uni-text",[t._v(t._s(e.timeRange))]),i("v-uni-text",{staticClass:"all"},[t._v(t._s(e.isMyAppoint?"我已约":e.isExpired?"已过期":e.disable?t.disableText:t.undisableText))])],1)],1)]})),t.showOvernight?i("v-uni-view",{staticClass:"item overnight-item-wrapper"},[i("v-uni-view",{staticClass:"item-box overnight-box",class:{active:t.isOvernightActive,disable:t.isOvernightDisabled},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.selectOvernightEvent.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"overnight-content"},[i("v-uni-text",{staticClass:"overnight-title"},[t._v("包夜")]),i("v-uni-text",{staticClass:"overnight-time"},[t._v("23:00 ~ 次日09:59")]),i("v-uni-text",{staticClass:"overnight-status"},[t._v(t._s(t.getOvernightStatusText()))])],1)],1)],1):t._e()],2)],1),i("v-uni-view",{staticClass:"bottom"},[t.isMultiple||t.isSection||t.isQuantum?t._e():i("v-uni-view",{staticClass:"show-time"},[t._v("预约时间："+t._s(t.orderDateTime))]),i("v-uni-button",{staticClass:"submit-btn",attrs:{"form-type":"submit",type:"default",size:"mini"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.handleSubmit.apply(void 0,arguments)}}},[t._v("确认预约")])],1)],1)},a=[]},e6fb:function(t,e,i){var n=i("6959");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("4f06").default;a("694cf98f",n,!0,{sourceMap:!1,shadowMode:!1})},e744:function(t,e,i){"use strict";i.r(e);var n=i("6425"),a=i.n(n);for(var o in n)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(o);e["default"]=a.a}}]);